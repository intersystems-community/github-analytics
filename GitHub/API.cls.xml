<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="GitHub.API">
<Abstract>1</Abstract>
<Super>%RegisteredObject</Super>
<TimeCreated>63915,22620.787602</TimeCreated>

<Method name="CreateAPIRequest">
<ClassMethod>1</ClassMethod>
<FormalSpec>login:%String,password:%String</FormalSpec>
<ReturnType>%Net.HttpRequest</ReturnType>
<Implementation><![CDATA[
	set sslConfigName = "github.com"
	set sc = ##class(SSL.Configuration).SSLConfig( sslConfigName ) if 'sc {
		write !, "SSLConfig error: ", sc 	
	}
	
    set request=##class(%Net.HttpRequest).%New()
    set request.Https=1
	set request.SSLConfiguration = sslConfigName
    set request.Server="api.github.com"                         
    do request.SetHeader("Accept","application/vnd.github.v3+json")             // we want 3rd version of api   

    if ((login'="") && (password'="")) { 			// supply Username and Password, if both are provided. GitHub accept Basic Auth
        set request.Username = login                // https://developer.github.com/v3/auth/
        set request.Password = password
    }   

    Quit request
]]></Implementation>
</Method>
</Class>
</Export>
